(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,n){e.exports={card:"Project_card__23cmz",body:"Project_body__B45vo",description:"Project_description__2PeWE"}},37:function(e,t,n){e.exports=n(76)},76:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(9),o=n.n(c),s=n(10),i=n(11),l=n(13),u=n(12),m=n(14),d=n(35),p=n.n(d),j=n(93),f=n(90),E=n(91),b=n(92),h=n(17),v=n(15),O=n(77),g=n(78),y=n(79),x=n(80),S=n(81),k=n(82),C=n(18),I=n.n(C),w=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleEditClick=function(){var e=n.props,t=e.id,a=e.onEditClick;a&&a(t)},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.comment,a=e.result,c=e.type,o=e.last_check,s={},i=!1,l=r.a.createElement("span",{className:"text-success"},"Ok");return"website"===c?"string"==typeof a&&(l=r.a.createElement("span",{className:"text-danger"},"Error - ".concat(a)),i=!0):a||(l=r.a.createElement("span",{className:"text-danger"},"Error"),i=!0),i&&(s=Object(v.a)({},s,{outline:!0,color:"danger"})),r.a.createElement(O.a,Object.assign({className:I.a.card},s),r.a.createElement(g.a,null,t),r.a.createElement(y.a,{className:I.a.body},r.a.createElement(x.a,null,r.a.createElement("strong",null,c),": ",l),r.a.createElement(S.a,{className:I.a.description},n),r.a.createElement(S.a,null,r.a.createElement(k.a,{outline:!0,color:"secondary",size:"sm",onClick:this.handleEditClick},"Edit")),r.a.createElement(S.a,null,r.a.createElement("small",{className:"text-muted"},"Last updated: ",new Date(o).toUTCString()))))}}]),t}(a.Component),P=n(22),_=n(94),N=n(83),J=n(84),z=n(85),A=n(86),B=n(87),D=n(88),F=n(89),L=n(23),R=n.n(L),T=function(){return R()("https://novaweb.studio/dashboard/_api/projects/")},M=function(e){return R.a.patch("https://novaweb.studio/dashboard/_api/projects/".concat(e.id,"/"),{comment:e.comment})},U=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).state={isProcessing:!1},n.commentInput=r.a.createRef(),n.handleSubmit=function(e){var t=n.props,a=t.options,r=t.proceed;e.preventDefault();var c=a.project;c.comment=n.commentInput.current.value,n.setState({isProcessing:!0}),M(c).then(function(e){200===e.status&&r(e.data),n.setState({isProcessing:!1})})},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.show,n=e.options,a=e.dismiss,c=this.state.isProcessing,o=n.project;return console.log("project",n.project),r.a.createElement(_.a,{isOpen:t,toggle:a},r.a.createElement(N.a,{onSubmit:this.handleSubmit},r.a.createElement(J.a,{toggle:a},"Edit ",o.title),r.a.createElement(z.a,null,r.a.createElement(A.a,null,r.a.createElement(B.a,{for:"comment"},"Comment"),r.a.createElement(D.a,{type:"textarea",name:"comment",id:"comment",defaultValue:o.comment,autoFocus:!0,innerRef:this.commentInput}))),r.a.createElement(F.a,null,c&&r.a.createElement(f.a,null),!c&&r.a.createElement(k.a,{color:"primary",type:"submit"},"Save"))))}}]),t}(a.Component),V=Object(P.createConfirmation)(Object(P.confirmable)(function(e){return r.a.createElement(U,e)})),W=function(e){return V({options:{project:e}})},q=function(e){var t=JSON.parse(localStorage.getItem("projectsSortIndexes"));return t?e.map(function(e,n){var a=e.id,r=t.indexOf(a);return-1!==r?Object(v.a)({},e,{sortIndex:r}):Object(v.a)({},e,{sortIndex:n})}):e},G=function(e){var t=e.map(function(e,t){return Object(v.a)({},e,{sortIndex:t})});return H(t),t},H=function(e){var t=e.map(function(e){return e.id});localStorage.setItem("projectsSortIndexes",JSON.stringify(t))},K=Object(h.SortableElement)(function(e){var t=e.project,n=e.onEditClick;return r.a.createElement(E.a,{xs:6,lg:4},r.a.createElement(w,Object.assign({},t,{onEditClick:n})))}),Q=Object(h.SortableContainer)(function(e){var t=e.projects,n=e.onEditClick;return r.a.createElement(b.a,null,t.map(function(e,t){return r.a.createElement(K,{key:"item-".concat(t),index:t,project:e,onEditClick:n})}))}),X=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={projects:[]},n.refreshProjects=function(){T().then(function(e){var t=e.data;t&&n.processProjects(t)})},n.processProjects=function(e){(e=q(e)).sort(function(e,t){return e.sortIndex-t.sortIndex}),n.setState({projects:e})},n.handleSortEnd=function(e){var t=e.oldIndex,a=e.newIndex;n.setState(function(e){var n=e.projects;return{projects:G(Object(h.arrayMove)(n,t,a))}})},n.handleEdit=function(e){var t=n.state.projects;W(t.find(function(t){return t.id===e})).then(function(e){n.setState({projects:t.map(function(t){return t.id===e.id?e:t})})})},setTimeout(function(){return n.processProjects(e.projects)},100),setInterval(n.refreshProjects,2e4),n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state.projects;return r.a.createElement(Q,{axis:"xy",projects:e,onSortEnd:this.handleSortEnd,onEditClick:this.handleEdit})}}]),t}(a.Component),Y=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(j.a,null,r.a.createElement(p.a,{promiseFn:T},function(e){var t=e.data;e.error;return e.isLoading?r.a.createElement(f.a,null):t?r.a.createElement(X,{projects:t.data}):void 0}))}}]),t}(a.Component);n(74);o.a.render(r.a.createElement(Y,null),document.getElementById("root"))}},[[37,2,1]]]);
//# sourceMappingURL=main.ce74b569.chunk.js.map